  <header>
    <p><b>Welcome { {{user.role}} } to the Online Store App</b></p>
  </header>
  <p><b>Cart : </b><i data-cartid="{{cartId}}">{{cartId}}</i></p>
  <footer>
    <a href="/cart/{{cartId}}" role="button">Cart</a>
    <a href="/api/logout" role="button">Logout</a> 
  </footer>
  <div class="container">
    <h1 class="text-center my-4">Products</h1>
    <div class="row">
      <div class="col-12">
        <div class="table-responsive">
          <table id="main" class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Description</th>
                <th>Code</th>
                <th>Price</th>
                <th>Status</th>
                <th>Stock</th>
                <th>Category</th>
                <th>Thumbnails</th>
              </tr>
            </thead>
            <tbody>
              {{#each payload}}
                <tr>
                  <td>{{this._id}}</td>
                  <td>{{this.title}}</td>
                  <td>{{this.description}}</td>
                  <td>{{this.code}}</td>
                  <td>{{this.price}}</td>
                  <td>{{this.status}}</td>
                  <td>{{this.stock}}</td>
                  <td>{{this.category}}</td>
                  <td><img src={{this.thumbnails}} class="card-img-top img-fluid img-thumbnail" alt="..."></td>
                  <td><a href="/cart/{{cartId}}" role="button" class="btn btn-secondary" id="addToCart" data-productId="{{this._id}}">Add to cart</a></td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12 text-center">
        <p class="my-3">PÃ¡gina actual: {{page}}</p>
        <a href="{{prevLink}}" role="button" class="btn btn-secondary {{#unless hasPrevPage}} disabled {{/unless}}">Last Page</a>
        <a href="{{nextLink}}" role="button" class="btn btn-secondary {{#unless hasNextPage}} disabled {{/unless}}">Next Page</a>
      </div>
    </div>
  </div>
  <script>
    const addProductToCart = document.getElementById("addToCart");
    const cartId = document.querySelector("[data-cartid]").dataset.cartid
    addProductToCart.addEventListener("click", (event) => {
      event.preventDefault();
      const productId = addProductToCart.dataset.productid
      try {
        fetch(`/api/carts/${cartId}/product/${productId}`, {
          method: "POST"
        }).then((response) => {
          if (response.ok) {
            alert("Product added to cart");
            response.json()
          }
        }).then((data) => {
          window.location.href = `/cart/${cartId}`
          console.log(data)
        }).catch((error) => {
          console.log(error);
        })
      } catch (error) {
        console.log(error);
      }
    });
  </script>